# Travis CI Java documentation can be found in:
# https://docs.travis-ci.com/user/languages/java/
language: java

# https://docs.travis-ci.com/user/multi-os/
os: linux

# We can specify a list of JDKs to be used for testing. A list of available JDKs in Trusty can be seed in:
# https://docs.travis-ci.com/user/reference/trusty/#jvm-clojure-groovy-java-scala-images
jdk: oraclejdk11

# https://docs.travis-ci.com/user/job-lifecycle#skipping-the-installation-phase
install: skip

# To prevent error like:
# xxx.sh: Permission denied
before_script:
  - chmod +x install.sh
  - chmod +x mvnw
  - chmod +x deploy.sh

# Custom Maven install script:
# https://docs.travis-ci.com/user/job-lifecycle/
# https://docs.travis-ci.com/user/customizing-the-build
script:
  - "./install.sh"

# Decrypt file `gpg.asc.enc` before deployment
# https://docs.travis-ci.com/user/encrypting-files/
before_deploy:
  - openssl aes-256-cbc -K $encrypted_0b849b95243d_key -iv $encrypted_0b849b95243d_iv -in .travis/gpg.asc.enc -out .travis/gpg.asc -d

deploy:
  - skip_cleanup: true
    provider: script
    script: ./deploy.sh
    on:
      branch:
        - master
        - feature/**
  - skip_cleanup: true
    provider: script
    script: ./deploy.sh
    on:
      tags: true

# https://docs.travis-ci.com/user/notifications#default-notification-settings
notifications:
  email:
    on_success: change
    on_failure: always

# https://docs.travis-ci.com/user/environment-variables/
# https://docs.travis-ci.com/user/encryption-keys#usage
env:
  global:
    - secure: "EcN7//MxH2sPb0sC4xIDRXbo0/qU7KSir+zBZeXQdyGm1GO9FZJQyLt4gCRabUk8603WPAgBWWAHyeBSnOvQATZ/+4p+qpWmJE0+qZXV3V8WGsS9MoavV5HHxd8kU4T4Un/BdL/2SEmlGml8hQrLYFK+gup8sKZ2txou5/NINK3kqriZIBX8vN/hsz5FJDXgee1Sd1/rkuziFQ3Z8edkDnO+ija2/cbze2j28Cp7zGhBeo7QkvkIU0ngCloXcWNnQvhwjBxKNSZMx25MFI6Mv6r5uWtP4p5W/oVMVzgPWNPD45wWAdKzGgDGzv0dQl/aNJDYdZGZPYGNKDRvmrhGKeuZNOd+P7qXPwoJhKCNz/itcgGGizY3pAnIusORCMgmWVNRp5orviMTlneOBEY4jh1+aCz3PAXMVU+9zHV5UvINS4SlmdMGSJRo2UUfQvNyDHgvl1heTBPif3ykAkkzVIf3cLB1nPjBzEpNU38QAcRMZyGZ2HNMGDuGkvAag1zFQ5FKY6GXfubxLPvCgbH7BEjhW7hZcxcT5ynxc0bPRIUk2ab2IaBmJX/+2Ltl0vBcxusuM95LdyQnp+A/G/nf19Go6La0cQ3eWv7leBY1egJF80f538IjF2gCCdW3Nr6ptTgVHaccmORL5qtNofrEzxjk9ZGsCHuE1cydXurCwJw="
    - secure: "OxrKUiF4TE0PRIhlv9fyoRgA79gv1McOAwEJDoYZ83O64DYF1x6COIInDBFiESSb8seuDKsP2XoenjZGihxyneDPYsDwje9HXDcXCKyuJAv/DEu19/+/ac/s5vTWU0mWMrlSpdyE2znEmQnDUqIx6VwZpTU/n0egJujSKeKW6YiYC0fPcUhM5m9ERdlQzRsNOos9Yb41gHf6ebL0TVv7G+SFtNvUphfjVh78WGkAgmBH5+WUtTuNcSf4gTCE63bAxDMmcVjkh9O41DtTx9eds4OLUYE5Q9pf/+rJo68zzeS5B9UZrSxIE3r6ojUwgX/Fv5dI3zuCV1olunVuPH1qYFc0l65SxNJAD7Cyxgg+X1M3o4NiugZMpXWR8hBwv4qKKvr+CJQ7nwPmoVPK51eqf9/bxTqVXIySLr4iDa70vkXFYBMIGv6r3YMXfiRx62pwlaN9t981YBU+0qWjWphwNh9K+LQskd9NWabTlHZPVBd4FhzPr7VfmLTqSNf/k2RvQD2qSgcYc9uoVd3XipPnrCTE60/DrNdYHx71L/BAz84+VT/d+zNNu++csFpYseCSfZP+cSXsYP14Lkmfj8rHRz6wSoTCXpG4UY74NsL0kD5xsTF2w/d7Cvm4obSICD8UbjAjWPq9DOZQdKRRE6hbKywqEtKb+AL66+Eb2rLCFn0="
    - secure: "E1WCGA9hkzVBq8nag4k1equ7Kho5q+wXb6HrqZg3SRldmVwS+OOuDWCf3kEkT9rdez9cQU+699Jkoufgo0QCWoAmYwfVNf4NaWLQXrJcIzOpEm8ZKyr1XvrE/D3YbYm8WiVfBj2dXMFuDlRhrzL6i8vYfpjg2Pl97EsFEOCy+EbHWSQmO3rCv/Jq4WdrpH8YZgZailJL6essfvfB80d1F3B59l/Ic1WKsknqgxXXgaPuhrrbZtD8u+vUsb0SMj2E3ds8/AMlm1DwgCWw6W87z/HiyoyQE+pFCHUhK/ZC4qYdhAIAuuCN8ve4F4mXmu37rh8vuIOT6yh6f+ZNm600WQ17aKUSdHJMmjRuJGdRFmmIzIX2ezQaUr3kMiesWy4TfUyGNW/CCB6nRsBOwsKBdTI2/hS+QZTNBNdC347a30I9L7/nh2ia0VxCR1ApXZGQHmrzciDmhAZYsZBh4k/EgelXkJ9PmIDa0pGU9czLS4A+kOZ4jOCa2iA57KlobF0oO3ZFqsibdjO10vU3QCKah0LI3Y4rQdAZ/W6UmWrEHMXGDC2SSPsiSg8XpVbwQT3iNJfMw1jzfSUShyr8u1RkWi178v7yV9UvB+LCD/HY45IGdCbbRR23x18qXpZjPgz6zDwiIuTe9ByA+K4ete3UFArdW8WjFWWyuiG1oTjvKg4="
    - secure: "DFg7HnJjoCgDGURa/zBYoLZdsoghpz0RgIijWpksqxPikuohojVZartQB5fkXxDOipVzh3sbMM390ecpSNetSEfmx7H8iv+aIt73Z4G/QLkgQDUY94S3MdpS4XBKMUEHFbWUwojZe1+0btNe+hu40JIMltkxFQ3CQMcEop/ql1YNAVF1j90tsXyyqcGotJg8Gnu8ADda4qDcDVPwxdgLkU3zcI031rgmNog6PkJfxe+rzkucXdvfAC5iom9tcXr+EGhM1Yn6mYUFjnuhoSrX4VvWbnn4dgW16sBCgdi0CH8RTH7mWEMuiBF6Rm4lrlnya2oKp4HYuwtqdxFpMiZehFzQ6U9eKky4KrBHsWSQgdT1w9Avrv0yuf3sj98a/TiMOqcSuH3EP3LI0APDTIQxtf0Ji+wB/fyw3td+ZTiDqUIjAe8o5DG0/4zZkO2/Ke3XORz2rljKfL26Jl8ai3+5uqAyubT8pxza29i2puWwVWdLxHcA0iIFbDYzVQRVSsozvz/jzktSa71H+Tb0MOES4hznBxBpktlc8mQTO8FQUVX+1Q/gH8gT6eo2TryJeMh5x70UvELBopmKJNs2eubbopJWRHtTHFPBO+LvJrqpCc1rcJY1vghcHb0+onAp87XjpgyBRWQAgIeUALZSkljxcU82sNl4FF/ILlEIqeFsCu4="
