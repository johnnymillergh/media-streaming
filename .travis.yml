# Travis CI Java documentation can be found in:
# https://docs.travis-ci.com/user/languages/java/
language: java

# https://docs.travis-ci.com/user/multi-os/
os: linux

# We can specify a list of JDKs to be used for testing. A list of available JDKs in Trusty can be seed in:
# https://docs.travis-ci.com/user/reference/trusty/#jvm-clojure-groovy-java-scala-images
jdk: oraclejdk11

# https://docs.travis-ci.com/user/job-lifecycle#skipping-the-installation-phase
install: skip

# To prevent error like:
# xxx.sh: Permission denied
before_script:
  - chmod +x install.sh
  - chmod +x mvnw
  - chmod +x deploy.sh

# Custom Maven install script:
# https://docs.travis-ci.com/user/job-lifecycle/
# https://docs.travis-ci.com/user/customizing-the-build
script:
  - "./install.sh"

# Decrypt file `gpg.asc.enc` before deployment
# https://docs.travis-ci.com/user/encrypting-files/
before_deploy:
  - openssl aes-256-cbc -K $encrypted_4f0d00631887_key -iv $encrypted_4f0d00631887_iv -in .travis/gpg.asc.enc -out .travis/gpg.asc -d

deploy:
  - skip_cleanup: true
    provider: script
    script: ./deploy.sh
    on:
      branch:
        - master
        - feature/**
  - skip_cleanup: true
    provider: script
    script: ./deploy.sh
    on:
      tags: true

# https://docs.travis-ci.com/user/notifications#default-notification-settings
notifications:
  email:
    on_success: change
    on_failure: always

# https://docs.travis-ci.com/user/environment-variables/
# https://docs.travis-ci.com/user/encryption-keys#usage
env:
  global:
    - secure: "DwQw/xajbyrBUpx0/TBmAsUArKn08Ko0ncHWKp5vF+Y09gGWuLSRrkOUURXU5zsakewGnwgwSl72NCH1wrgjNUpL0v0Btgkfpbaz1PW5oOPCfgcoY4gCBBp5kCwUg2ONErgyoRN/ePPN1pYK/LVKlockunT+8cffiK1DkjH8yx6izk0ZmkWwdP1ZULlFL0VnFR2wIUY9cosCjY2rddd3iBBk9UjcTXiCgu3nUL/qMZJBd1TUNEIDUCINK4RUkkOBqfzsXZR4ydUjYCGkb/Ul3FkNzs+mFpzTTtKl4qYbVSfcv6Yn5oUz7EXNcELYMSQ+yiGEdRWQx3iLxEU/lGjSe2dgPH6RbNPa4QEj/nndvLiiMBoxlzzqKfaDSCao4taby6uzfyEAipqicDIA9pVA6u7ILKebKX6DJVBh7QBlMPv5JTs7Ghd5QrkzIsXmq0P+dt2PztK+5JX6g7ytPGvN8oZ76dc1IF2t7E1pZSIMAw7rQBL1dyYXPtpQwrRIs0vF8C4vL2XI3utz/7V6JB6ao80Svk6D7O+wSDUN/qX8u/krV2SjOv5GKvk6M6MvzC/JSSn+xw18SrEaCMrTZcNuFCfkuyMJUkCsEm/qDU8fmIfcIRWyOKtaySyGrAfJI0qDDLc+GlPdka/fWCcG3e/BxkoyHLSG+3NLJTnLkUBtGZE="
    - secure: "HGBiKhMbdj28wGxCzyGcWOUC9AxvkwhXrSxotySM+xBEVIm161U5uuC0El4/A3qU0feSRav+kA9xnte48QZUZc1yc4sdtT0J5rspZgx+4VGgNVjI+AUsrgbbcjZmk78GI2i0lXPIMXtyTzknriglruu2E+Ov7znDnWqiSUsWeaWA0QdTLWNFPONrsR2tgYGvzXhuVzONAVqucyvwZy/9WsnGOvJ3wlMbv8TKgsgfl/ntN2rijf7tzVVdefdRt9T5e9EJkTOJDvaUbbTOW7rBkM/WyrZxgbXsYmzi2Icg2o/h7pkT/+iZ/2MQYnDGJY3hRmRzHPKbAB90nVC0VQ42s9QL6gKWNTLAvM92/DhXu6anmowNEaLQGAYVIvPSngY16Nio0ZoJimVWPjb1dQ9l6vMY9+CJUlKW3LVTeqAfZ+6RW4COxNXoULEU7LlIExP8axtm0hl/mp0tv8IO/vuZs0/10g2s0cBw4ztWGg4FSGSgzpj5b6ezQCdS7jhhheLyws+rs2y0zOme7CU3ZqlwDwYnIyWpBcn0Za0OFObo4N0JX6CeuQBBf8bFLZJhMKVBfLTlVg3fcIPO5TybBUNsOhzsvURe9RDj/phDOwfxZNL9Plm0SOfX9lzeuQDFCurpt5zlhdXWmYlTX7zp2aRbAYV+BWlz2fd23Ujqn0RL2mo="
    - secure: "HT/v1ggXtkG0lrOU1xueotDr4PAOTRjx0GZfg1+jLKjIRNNLnDmYw3B7x8Ctf0iL9SKoSIrNyHVBPrUcCNskanABNCCpVUfcfWd4ku5TYAukyDlnN/cdLK4W4SbbvBvNPmPBLy8UrpiFdnlN/eYmCAF8RIvvM5FPAAt8K3mIjXBlznkUzI+OKTWnsOAtvz7orTvVpWmdD4ijx5i5mvWgAf63TXNL2fKXKXiEd+bn19mf5oKzqtwRAR69wLO2dAbO4LKltyk2gk5HhIpvzxrxTC0deFSW5ZgYyU1jqLYC18bE7JchmszJ6QApNBlh7Rmgc6uMY9eNJLbvnuLkWro7LcUSacanTbLPulk9OfBc+95ECJB1pn9RLAW/aspgDV4M0JI6GOg115qCcYmzcvNM1zPVREj58ZV7SFAt33eaZoGOJWXEuhI6S9xbv0CwRIE+2tpekeV/UZkPXHwDgyqXusYZNJs9ljDhpZHxDcSk41ceYX/faEVYboQrHlX6WsRxbtM1V7lbZkQPdYvH1azZK9dPkJnbGoC0+9mVX00f1a8W+/1o4H7qoC/9VWE7aTWwA+kZb9phaIPRMER9X4mGB0InSlqbM/aEc1tEPFtc8lmHque688GxuuvYdc7SHJeUixsH29mQeQHKfiUucMiA/6+T0GRSPAKaOy2NU7m70cY="
    - secure: "bZCSd5Bq7Cicoe8tqoLpK2JYKNfqy11+kh1FxFsMAduv5ul2kH5jaLum1rK6oN9+wYdAWBaVR68L2atvc9VkJBvbS4E+/tHP6btwy9J+ESfgYanG2WCNMGqa8WpF2zlwDXm7BEgTgKk5WzgZQU6sI7JQ62M4zgw8dW/z0WeKIVFtbBEHO9E2COP70gV/3ixdYitsYoNTrUWO8TJ1hNvt4xNRrzYzaBqib8KFFOKUfwzbxpbsGq4LcDiUKmB8R/WK9BNpx10z9iIyFKq/Gsz0IGNEPlA1Dyry4AmK7vdToZivOaJw+xMkSJcl7MjDaLuy53lmz2uEQawDTxiqii7tewzNNafV/rPawb2fVJ4ccZajIsUgiFf8mKUjutzO3xDslJgxx7ht+Epf7hfZOGMawasTL/JJHozQ+f90SvhT8Wf2cyjyfaKiwIUeN6SfJVAU/5aW/RhljEwuWG+SfUhitvB46KPvmwcyADv/7xau46YZnyEXOIGmbfOuxZxqXoyCeQ6QvFQ5bTl0F6vOd3OtyTU64saHBEFSr+rP+OIdeJ1TB5SSCRf8zSaEqq922MrLf0zETNStjH8F2eF7XPNMUp5QKe587Ue2LNQrd+cUc6NcDDU8m4Rxjz+MSaYYv8b9gjQytr0C6Gl9eAX5oligxQ3kR/w9P9khcz7TZDoIs4M="
